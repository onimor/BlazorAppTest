@page "/"

 
@using System.Data
@using BlazorAppTest.Dto
@using Stimulsoft.Base
@using Stimulsoft.Report
@using Stimulsoft.Report.Blazor
@using Stimulsoft.Report.Dictionary
@using Stimulsoft.Report.Web
@inject HttpClient Http

<StiBlazorViewer Report="@report" Options="@options" />

@code
{
	private StiReport report;
	private StiBlazorViewerOptions options;
	private List<BalloonDto> printingLists = new();
	protected override async Task OnInitializedAsync()
	{ 
		Stimulsoft.Base.StiLicense.Key = "my";
		report = StiReport.CreateNewReport();
		var bytes = await Http.GetByteArrayAsync("Reporst/QRCode.mrt");
		report.Load(bytes);
		GetData();
		report.RegBusinessObject("TestReuests", printingLists);


		await base.OnInitializedAsync();
	}
	private void GetData()
	{
		for (var i = 0; i < 10; i++)
		{
			printingLists.Add(new BalloonDto { Id = Guid.NewGuid(), Name = i.ToString() });
		}
	}
}
